<!DOCTYPE html>

<script type="module">
    async function init() {
        const memory = new WebAssembly.Memory({
            initial: 10,
            maximum: 100,
        });

        const { instance } = await WebAssembly.instantiateStreaming(
            fetch("./deci.wasm"),
            {
                js: {
                    mem: memory,
                },
            });

        const view = new Uint16Array(memory.buffer);
        view[0] = 9283;
        view[1] = 3061;

        const carry = instance.exports.deci_add(
            0, 2,
            2, 4);

        console.log(carry);
        console.log(view[0]);
    }
    init();
</script>
