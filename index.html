<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width,initial-scale=1' />
    <style>
        body {
            color: black;
            background-color: #dddddd;
        }

        a {
            background-color: #66bd66;
            color: black;
        }

        a:visited {
            color: #006400 !important;
        }

        .main_hr {
            border-bottom: 0.4em dotted #30532c;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }

        .regular_hr {
            border-bottom: 1px solid #30532c;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }

        .my_project {
        }

        .my_project_head {
            font-size: larger;
            background-color: #86e57d;
            border: 0.15em dashed #dddddd;
            margin-top: 0.5em;
            font-weight: normal;
            margin-bottom: 0.5em;
        }

        .my_project_quote {
            font-style: italic;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }

        .main_header {
        }
    </style>
    <title>shdown.github.io</title>
</head>
<body>

<div class="main_header">
    I am Viktor Krapivenskiy. Here is my <a href="/resume.pdf">CV</a>.
    Follows is the list of things I made.
</div>

<div class="main_hr"></div>

<div class="my_project">
    <div class="my_project_head">
        <a href="https://github.com/shdown/luastatus"><b>luastatus</b></a>,
        a universal status bar content generator
    </div>

    <b>luastatus</b> is a universal status bar content generator. It allows the user to configure the way the data from event
    sources is processed and shown, with Lua. Its main feature is that the content can be updated immediately as some
    event occurs, be it a change of keyboard layout, active window title, volume or a song in your favorite music player
    (provided that there is a plugin for it) — a thing rather uncommon for tiling window managers. Its motto is:

    <blockquote class="my_project_quote">No more heavy-forking, second-lagging shell-script status bar generators!</blockquote>

    It has a modular architecture, supporing plugins for providing data and barlibs for interacting with different status
    bars. It supports <b>i3wm</b>, <b>dwm</b>, <b>lemonbar</b>, <b>dzen</b>/<b>dzen2</b>, <b>xmobar</b>, <b>yabar</b>, <b>dvtm</b>,
    and others.
</div>

<div class="regular_hr"></div>

<div class="my_project">
    <h1 class="my_project_head">
        <a href="https://github.com/shdown/cmenu"><b>cmenu</b></a>, a column-layout dynamic menu for the terminal
    </h1>

    <b>cmenu</b> is like dmenu for terminal, but it’s also multi-column.
    It can be used to select a Wi-Fi network to connect to, select a device to mount, and similar things.
</div>

<div class="regular_hr"></div>

<div class="my_project">
    <h1 class="my_project_head">
        <a href="https://github.com/shdown/jjhash"><b>jjhash</b></a>, a simple string hash function that is faster than FNV-2 and has the same or better quality than FNV-2
    </h1>

    <b>jjhash</b> is a string hash function.
    It is:
    <ul>
        <li>simple (also the implementation is very small and consists of a single header file);</li>
        <li>faster than FNV-2 (6x faster on pointer-and-length strings, 3x faster on null-terminated strings);</li>
        <li>either on par with, or better than, FNV-2 on statistical properties;</li>
        <li>streamable (i.e. supports fast calculation of the hash of concatenation <tt>A+B</tt> by the contents of <tt>B</tt> and the hashing state of <tt>A</tt>);</li>
        <li>has both 32-bit and 64-bit variants;</li>
        <li>licensed under public domain-like license (Unlicense).</li>
    </ul>
</div>

<div class="regular_hr"></div>

<div class="my_project">
    <h1 class="my_project_head">
        <a href="https://github.com/shdown/libdeci"><b>libdeci</b></a>, an arbitrary-precision decimal arithmetic library for C
    </h1>

    <b>libdeci</b> is an arbitrary-precision decimal arithmetic library for C with add-on libraries
    <a href="https://github.com/shdown/libdeci-kara">libdeci-kara</a> implementing Karatsuba multiplication,
    <a href="https://github.com/shdown/libdeci-ntt">libdeci-ntt</a> implementing multiplication via Number-Theoretic Transform (NTT), a variant of Fourier transform, and
    <a href="https://github.com/shdown/libdeci-newt">libdeci-newt</a> implementing fast inversion and division using Newton’s method.
    It is faster than the <b>mpdecimal</b> library.

    <br/>
    See also the <a href="https://shdown.github.io/deci/demo.html">libdeci WebAssembly demo</a>.
</div>

<div class="regular_hr"></div>

<div class="my_project">
    <h1 class="my_project_head">
        <a href="https://github.com/shdown/calx"><b>calx</b></a>, a bc-like programming language
    </h1>

    <b>calx</b> an attempt to make a modern replacement for <b>bc</b>, while preserving its best features, such as big-decimal
    numbers and explicit support for interactivity in the language. It is a full-fledged programming language with
    functions, local and global variables, lists, dicts, strings, etc.

    <br/>
    It uses <b>libdeci</b> for arithmetic operations.
</div>

<div class="regular_hr"></div>

<div class="my_project">
    <h1 class="my_project_head">
        I wrote <a href="https://arxiv.org/abs/2011.11524">a paper titled “Speeding up decimal multiplication”</a>
        (<a href="/stuff/sudm-paper.pdf">mirror of the PDF on this site</a>,
        <a href="https://github.com/shdown/decimal-multiplication-paper">the repository of the paper</a>)
    </h1>

    This research project achieves a 3x—5x speedup over the <b>mpdecimal</b> library. The paper describes the implementation
    and discusses further possible optimizations.
    <br/>
    It also present a simple cache-efficient algorithm for in-place 2n×n or n×2n matrix transposition,
    the need for which arises in the “six-step algorithm” variation of the matrix Fourier algorithm, and which does
    not seem to be widely known.
    <br/>
    Another finding is that use of two prime moduli instead of three makes sense even
    considering the worst case of increasing the size of the input, and makes for simpler answer recovery.
</div>

<div class="regular_hr"></div>

<div class="my_project">
    <h1 class="my_project_head">
        <a href="https://github.com/shdown/fiwia"><b>fiwia</b></a>, a generator of x86-64 machine code for fixed-width multi-word arithmetics</a>
    </h1>

    The need for fixed-width multi-word arithmetics frequently arises in cryptography.
    In this setting, full unroll is usually desirable in two reasons:
    <ol>
        <li>loop overhead, and;</li>
        <li>the need to pass the carry flag to the next iteration, which, without unrolling, would have to be done via saving and restoring the carry flag (which is slow).</li>
    </ol>

    <b>fiwia</b> generates fully unrolled x86-64 assembly for fixed-width arithmetic operations, such as: addition/subtraction, masked addition/subtraction, negation, comparison, multiplication, bit shifts.

    <br/>
    It’s generally faster than <b>libgmp</b>’s <tt>mpn_*</tt> (except for div/mod operations).
</div>

<div class="regular_hr"></div>

<div class="my_project">
    <h1 class="my_project_head">
        I wrote <a href="/stuff/theorems-paper.pdf">a document titled “Theorems for long division and root extraction”</a>
        (see also <a href="https://github.com/shdown/theorems-for-bignum">the repository</a>)
    </h1>

    It provides useful information and mathematical proofs on the common methods of doing division and n-th root extraction on long numbers.
    This information tends to be scattered across specialized literature and be in a hard-to-follow form.
</div>

<div class="regular_hr"></div>

<div class="my_project">
    <h1 class="my_project_head">
        I wrote <a href="https://arxiv.org/abs/2506.13991">a paper titled “<i>glass</i>: ordered set data structure for client-side order books”</a>
        (<a href="/stuff/glass-paper.pdf">mirror of the PDF on this site</a>, <a href="https://github.com/shdown/glass-paper">the repository of the paper</a>).
    </h1>

    In this paper I present my implementation of ordered set based on a trie.
    It only supports integer keys and is optimized for market data, namely for what we call sequential locality.
    The following is the list of what I believe to be novelties:
    <ul>
        <li><i>cached path</i> to exploit sequential locality in market data, and fast truncation thereof on erase operation;</li>
        <li>a hash table (or, rather, a <i>cache table</i>) with hard O(1) time guarantees on any operation to speed up key lookup (up to a pre-leaf node);</li>
        <li>hardware-accelerated "find next/previous set bit" operations with BMI2 instruction set extension on x86-64;</li>
        <li>order book-specific features: the preemption principle and the tree restructure operation that prevent the tree from consuming too much memory.</li>
    </ul>
    We achieve the following speedups over C++'s standard std::map container:
    6x—20x on modifying operations,
    30x on lookup operations,
    9x—15x on real market data,
    and a more modest 2x—3x speedup on iteration.
</div>

<div class="regular_hr"></div>

<div class="my_project">
    <h1 class="my_project_head">
        Support for Lua scripting in <i>strace</i>
    </h1>

    I implemented support for Lua scripting in <b>strace</b> as a participant of Google Summer of Code-2017 (<a href="https://gist.github.com/shdown/b5b48834fde9e68aa541e952af03579a">work product submission</a>, <a href="http://0x1.tv/img_auth.php/f/fe/Lua-%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D0%B8%D0%BD%D0%B3_%D0%B2_strace_%28%D0%92%D0%B8%D0%BA%D1%82%D0%BE%D1%80_%D0%9A%D1%80%D0%B0%D0%BF%D0%B8%D0%B2%D0%B5%D0%BD%D1%81%D0%BA%D0%B8%D0%B9%2C_OSSDEVCONF-2017%29.pdf">slides</a>).
    <br/>
    This project extends the <b>strace</b> project with tampering capability, allowing the user to inject fake syscall results, and read
    and write the memory of the process being traced.
</div>

<div class="regular_hr"></div>

<div class="my_project">
    <h1 class="my_project_head">
        <a href="https://github.com/shdown/lua-shm-state-poc">A proof-of-concept of sharing a Lua state between multiple processes</a>
    </h1>

    It is a PoC of sharing Lua interpreter memory between multiple processes.
    <br/>
    There’s nothing new in Lua being flexible: it allows to override all the memory management by passing a custom allocator to <tt>lua_newstate</tt>. The only things left are to create a shared memory mapping and implement an allocator working in it.
</div>

<div class="regular_hr"></div>

That’s it! You can send me an email to <tt>${my_github_handle}nine@gmail.com</tt>.

</body>
</html>
